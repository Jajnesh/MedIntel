{% extends "basic.html" %}
{% load static %}

<!-- Page Title -->
{% block title %}Doctor Page{% endblock title %}

<!-- Header Content -->
{% block extrahead %}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="description" content="Search for doctors based on name, specialization, or locality. Find the right healthcare professional for your needs with our easy-to-use doctor search tool.">
<meta name="theme-color" content="#ffffff">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="">

<!-- SEO Description -->
<meta name="description" content="Search for doctors based on name, specialization, or locality. Find the right healthcare professional for your needs with our easy-to-use doctor search tool.">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<!-- Performance optimization: Preload critical resources -->
<link rel="preload" href="https://cdn.tailwindcss.com" as="script">

<!-- Header Scripts -->
<script id="header-scripts">
// This script tag will be replaced with actual scripts.head content
if (window.scripts && window.scripts.head) {
    document.getElementById('header-scripts').outerHTML = window.scripts.head;
}
</script>

<!-- Preconnect -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Font stylesheet -->

<script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.8/handlebars.min.js"></script>

<!-- Core CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
// render the settings object
//console.log('settings', [object Object]);
document.addEventListener('DOMContentLoaded', function() {
tailwind.config = {
    theme: {
    extend: {
        colors: {
        primary: {
            DEFAULT: '#1E88E5',
            50: '#f8f8f8',
            100: '#e8e8e8', 
            200: '#d3d3d3',
            300: '#a3a3a3',
            400: '#737373',
            500: '#525252',
            600: '#404040',
            700: '#262626',
            800: '#171717',
            900: '#0a0a0a',
            950: '#030303',
        },
        secondary: {
            DEFAULT: '#F5F5F5',
            50: '#f8f8f8',
            100: '#e8e8e8',
            200: '#d3d3d3', 
            300: '#a3a3a3',
            400: '#737373',
            500: '#525252',
            600: '#404040',
            700: '#262626',
            800: '#171717',
            900: '#0a0a0a',
            950: '#030303',
        },
        accent: {
            DEFAULT: '',
            50: '#f8f8f8',
            100: '#e8e8e8',
            200: '#d3d3d3',
            300: '#a3a3a3', 
            400: '#737373',
            500: '#525252',
            600: '#404040',
            700: '#262626',
            800: '#171717',
            900: '#0a0a0a',
            950: '#030303',
        },
        },
        fontFamily: {
        sans: ['Roboto, sans-serif', 'Inter', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Helvetica Neue', 'Arial', 'sans-serif'],
        heading: ['Open Sans, sans-serif', 'Inter', 'system-ui', 'sans-serif'],
        body: ['Open Sans, sans-serif', 'Inter', 'system-ui', 'sans-serif'],
        },
        spacing: {
        '18': '4.5rem',
        '22': '5.5rem',
        '30': '7.5rem',
        },
        maxWidth: {
        '8xl': '88rem',
        '9xl': '96rem',
        },
        animation: {
        'fade-in': 'fadeIn 0.5s ease-in',
        'fade-out': 'fadeOut 0.5s ease-out',
        'slide-up': 'slideUp 0.5s ease-out',
        'slide-down': 'slideDown 0.5s ease-out',
        'slide-left': 'slideLeft 0.5s ease-out',
        'slide-right': 'slideRight 0.5s ease-out',
        'scale-in': 'scaleIn 0.5s ease-out',
        'scale-out': 'scaleOut 0.5s ease-out',
        'spin-slow': 'spin 3s linear infinite',
        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        'bounce-slow': 'bounce 3s infinite',
        'float': 'float 3s ease-in-out infinite',
        },
        keyframes: {
        fadeIn: {
            '0%': { opacity: '0' },
            '100%': { opacity: '1' },
        },
        fadeOut: {
            '0%': { opacity: '1' },
            '100%': { opacity: '0' },
        },
        slideUp: {
            '0%': { transform: 'translateY(20px)', opacity: '0' },
            '100%': { transform: 'translateY(0)', opacity: '1' },
        },
        slideDown: {
            '0%': { transform: 'translateY(-20px)', opacity: '0' },
            '100%': { transform: 'translateY(0)', opacity: '1' },
        },
        slideLeft: {
            '0%': { transform: 'translateX(20px)', opacity: '0' },
            '100%': { transform: 'translateX(0)', opacity: '1' },
        },
        slideRight: {
            '0%': { transform: 'translateX(-20px)', opacity: '0' },
            '100%': { transform: 'translateX(0)', opacity: '1' },
        },
        scaleIn: {
            '0%': { transform: 'scale(0.9)', opacity: '0' },
            '100%': { transform: 'scale(1)', opacity: '1' },
        },
        scaleOut: {
            '0%': { transform: 'scale(1.1)', opacity: '0' },
            '100%': { transform: 'scale(1)', opacity: '1' },
        },
        float: {
            '0%, 100%': { transform: 'translateY(0)' },
            '50%': { transform: 'translateY(-10px)' },
        },
        },
        aspectRatio: {
        'portrait': '3/4',
        'landscape': '4/3',
        'ultrawide': '21/9',
        },
    },
    },
    variants: {
    extend: {
        opacity: ['disabled'],
        cursor: ['disabled'],
        backgroundColor: ['active', 'disabled'],
        textColor: ['active', 'disabled'],
    },
    },
}
});
</script>

<!-- Utilities and Components -->
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js"></script>
<script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.45.1/apexcharts.min.js"></script>

<!-- Optimized Font Loading -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">

<!-- Dynamic Meta Tags -->
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="robots" content="">
<meta name="google-site-verification" content="">
<meta name="baidu-verification" content="">
<meta name="yandex-verification" content="">
<meta name="bing-verification" content="">
<meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:image" content="">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Our Doctors">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="">


<!-- Font Links -->
<link rel="icon" type="image/x-icon" href="">

<!-- Custom styles -->

{% endblock extrahead %}

<!-- Page Content -->
{% block content %}
<div class="antialiased text-gray-800 min-h-screen flex flex-col">
    <!-- Main content area -->
    <main id="main-content" class="flex-1 relative h-full">
        <div id="RolloutPageContent">
            {% if messages %}
                <div class="fixed top-20 right-5 space-y-2 z-50">
                    {% for message in messages %}
                        <div class="flex items-center justify-between px-4 py-3 rounded-lg shadow-lg w-max whitespace-nowrap 
                            {% if message.tags == 'success' %} bg-green-200 {% elif message.tags == 'error' %} bg-red-200 {% else %} bg-blue-200 {% endif %}">
                            
                            <!-- ✅ Tick Icon -->
                            <div class="flex items-center">
                                {% if message.tags == 'success' %}
                                    <span class="mr-2">✅</span>
                                {% elif message.tags == 'error' %}
                                    <span class="mr-2">❌</span>
                                {% else %}
                                    <span class="mr-2">ℹ️</span>
                                {% endif %}
                                <span>{{ message }}</span>
                            </div>

                            <!-- ❌ Close Button -->
                            <button onclick="this.parentElement.remove()" class="ml-4 text-lg font-bold">✖</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            <div class="root mx-auto px-6 py-8 max-w-6xl">
                <!-- User Info Card -->
                <div class="rounded-lg shadow-md overflow-hidden mb-6">
                    <div class="bg-gradient-to-br from-blue-600 to-purple-700 p-4 flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center mr-4 overflow-hidden">
                                <img src="{% static 'homepage/images/doctor.PNG' %}" alt="Profile Picture" class="w-full h-full object-cover">
                            </div>
                            <div class="text-white">
                                <h3 class="text-xl font-semibold">Welcome, Dr. {{ doctor.user.first_name }} {{ doctor.user.last_name }}!</h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
                    <div class="bg-gradient-to-br from-blue-600 to-purple-700 text-white">
                        <div class="flex justify-around">
                            <button class="px-6 py-3 font-medium focus:outline-none" id="personalInfoButton">
                              Personal Info
                            </button>
                            <button class="px-6 py-3 font-medium focus:outline-none" id="professionalInfoButton">
                              Professional Info
                            </button>
                            <button class="px-6 py-3 font-medium focus:outline-none" id="appointmentsButton">
                              Appointments
                            </button>
                        </div>
                    </div>
                    <div class="p-6 bg-gradient-to-br from-blue-50 to-purple-100">
                        <div class="personal-info rounded-md" id="personalInfoSection">
                            <div class="space-y-3">
                                <div class="p-3 bg-white rounded-md border-l-4 border-blue-500">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="font-semibold text-neutral-800">Username</h3>
                                            <p class="text-sm text-gray-800 pb-1">
                                                <span class="text-neutral-500">{{doctor.user.username}}</span>
                                            </p>
                                        </div>
                                        <div class="text-right mt-3">
                                            <a href="{% url 'password_update' %}" class="w-1/2 bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-4 rounded-md text-center transition-colors font-medium">
                                                Edit Password
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-3 bg-white rounded-md border-l-4 border-blue-500">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="font-semibold text-neutral-800">Email</h3>
                                            <p class="text-sm text-gray-800 pb-1">
                                                <span class="text-neutral-500">{{doctor.user.email}}</span>
                                            </p>
                                        </div>
                                        <div class="text-right mt-3">
                                            <a href="{% url 'email_update' %}" class="w-1/2 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-md text-center transition-colors font-medium">
                                                Update Email
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-3 bg-white rounded-md border-l-4 border-blue-500">
                                    <div>
                                        <h3 class="font-semibold text-neutral-800">Contact Number</h3>
                                        <p class="text-sm text-gray-800 pb-1">
                                            <span class="text-neutral-500">{{doctor.mobile_no}}</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="p-3 bg-white rounded-md border-l-4 border-blue-500">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h3 class="font-semibold text-neutral-800">Practice Address</h3>
                                            <p class="text-sm text-gray-800">
                                                {% if doctor.prac_address %}
                                                    <span class="text-neutral-500">{{doctor.prac_address}}</span>
                                                {% else %}
                                                    None
                                                {% endif %}
                                            </p>
                                        </div>
                                        <div class="text-right">
                                            <button id="openAddressModal" class="bg-blue-600 text-white px-3 py-2 mt-1 rounded-md">Update Address</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="professional-info" id="professionalInfoSection">
                            <div class="space-y-3">
                                <div class="p-3 flex justify-between bg-white rounded-md border-l-4 border-blue-500">
                                    <div>
                                        <h3 class="font-semibold text-neutral-800">Year of Registration</h3>
                                        <p class="text-sm text-gray-800 pb-1">
                                            <span class="text-neutral-500">{{doctor.year_of_registration}}</span>
                                        </p>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-neutral-800">Highest Qualification</h3>
                                        <p class="text-sm text-gray-800 pb-1">
                                            <span class="text-neutral-500">{{doctor.qualification}}</span>
                                        </p>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-neutral-800">Specialization</h3>
                                        <p class="text-sm text-gray-800 pb-1">
                                            <span class="text-neutral-500 uppercase">{{doctor.specialization}}</span>
                                        </p>
                                    </div>
                                </div>
                                <p class="text-red-500 text-center">Note: Should you require any updates or changes to your professional details, please feel free to reach out to us via email for assistance.</p>
                            </div>
                        </div>
                        <div class="appointments-info" id="appointmentsSection">
                            <div class="space-y-3 overflow-y-auto">
                                {% if appointments %}
                                    <form method="post" action="">
                                        {% csrf_token %}
                                        <table class="w-full divide-y divide-blue-700">
                                            <thead>
                                                <tr>
                                                    <th scope="col" class="px-3 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Sl. no.</th>
                                                    <th scope="col" class="px-4 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Patient Name</th>
                                                    <th scope="col" class="px-6 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Date</th>
                                                    <th scope="col" class="px-6 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Mobile</th>
                                                    <th scope="col" class="px-6 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Note<span class="text-red-500">*</span></th>
                                                    <th scope="col" class="px-6 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Status<span class="text-red-500">*</span></th>
                                                    <th scope="col" class="px-6 py-3 text-left font-semibold uppercase tracking-wider bg-gradient-to-br from-blue-600 to-purple-700 text-transparent bg-clip-text">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-blue-700 text-neutral-800">
                                                {% for appointment in appointments %}
                                                <tr class="bg-white">
                                                    <td class="px-4 whitespace-nowrap">{{ forloop.counter }}</td>
                                                    <td class="px-4 whitespace-nowrap">{{ appointment.user }}</td>
                                                    <td class="px-4 whitespace-nowrap">{{ appointment.date }}</td>
                                                    <td class="px-4 whitespace-nowrap">{{ appointment.mobile }}</td>
                                                    <td class="px-4 whitespace-nowrap">
                                                        <input type="text" name="note_{{ appointment.id }}" value="{{ appointment.note }}" class="note-input hover:text-blue-500" data-id="{{ appointment.id }}">
                                                    </td>
                                                    <td class="px-4 whitespace-nowrap">
                                                        <select name="status_{{ appointment.id }}" class="status-select text-center rounded-full {% if appointment.status == 'Visited' %}bg-green-100 text-green-800{% elif appointment.status == 'Booked' %}bg-yellow-100 text-yellow-800{% else %}bg-red-100 text-red-800{% endif %}" data-id="{{ appointment.id }}" data-default-status="{{ appointment.status }}">
                                                            {% for key, value in APPOINTMENT_STATUS_OPTIONS.items %}
                                                            <option value="{{ key }}" {% if appointment.status == key %}selected{% endif %}>
                                                                {{ value }}
                                                            </option>
                                                            {% endfor %}
                                                        </select>
                                                    </td>
                                                    <td class="px-4 whitespace-nowrap">
                                                        <button type="submit" name="update_appointment_{{ appointment.id }}" value="{{ appointment.id }}" class="update-btn bg-blue-300 text-white px-4 py-1 my-2 rounded" disabled>Update</button>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                        
                                        <div class="text-center mt-4">
                                            <button type="submit" class="bg-blue-600 text-white px-4 py-1 rounded">Update All</button>
                                            <p class="text-red-500 mt-2">* marked fields can be updated.</p>
                                        </div>
                                    </form>
                                {% else %}
                                    <p class="text-gray-500 text-center mt-4">No appointments to show.</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
        </div>
    </main>

    <!-- Address Modal -->
    <div id="addressModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white dark:bg-neutral-800 rounded-lg shadow-lg max-w-md w-full mx-4">
            <div class="p-6 border-b border-neutral-200/30 dark:border-neutral-700/30 flex justify-between items-center">
                <h3 class="text-2xl font-semibold text-gray-800 dark:text-white">Update Practice Address</h3>
                <button id="closeAddressModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="p-6 pt-1">
                <form id="address-form" method="POST" action="{% url 'update_address' %}">
                    {% csrf_token %}
                    <div class="mb-4">
                        <label for="address_line_one" class="block text-md font-medium text-gray-700 dark:text-gray-300 mb-1">
                            Address Line One
                        </label>
                        <input type="text" id="address_line_one" name="address_line_one" 
                        class="w-full px-4 py-2 bg-gray-200 dark:bg-neutral-700 border border-neutral-200/30 dark:border-neutral-700/30 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-700 dark:text-gray-200" />
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="locality" class="block text-md font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Locality
                            </label>
                            <input type="text" id="locality" name="locality"
                            class="w-full px-4 py-2 bg-gray-200 dark:bg-neutral-700 border border-neutral-200/30 dark:border-neutral-700/30 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-700 dark:text-gray-200" />
                        </div>
                        
                        <div>
                            <label for="city" class="block text-md font-medium text-gray-700 dark:text-gray-300 mb-1">
                                City
                            </label>
                            <input type="text" id="city" name="city"
                            class="w-full px-4 py-2 bg-gray-200 dark:bg-neutral-700 border border-neutral-200/30 dark:border-neutral-700/30 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-700 dark:text-gray-200" />
                        </div>
                    </div>
                    
                    
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="state" class="block text-md font-medium text-gray-700 dark:text-gray-300 mb-1">
                                State
                            </label>
                            <input type="text" id="state" name="state"
                            class="w-full px-4 py-2 bg-gray-200 dark:bg-neutral-700 border border-neutral-200/30 dark:border-neutral-700/30 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-700 dark:text-gray-200" />
                        </div>
                        <div>
                            <label for="country" class="block text-md font-medium text-gray-700 dark:text-gray-300 mb-1">
                                Country
                            </label>
                            <input type="text" id="country" name="country"
                            class="w-full px-4 py-2 bg-gray-200 dark:bg-neutral-700 border border-neutral-200/30 dark:border-neutral-700/30 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-gray-700 dark:text-gray-200" />
                        </div>
                    </div>
                    
                    <div class="flex justify-center space-x-3 mt-6">
                        <button type="button" id="cancelAddressModal" class="px-4 py-2 bg-gray-200 dark:bg-neutral-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-300 dark:hover:bg-neutral-600 transition-colors duration-200 text-md font-medium">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors duration-200 text-md font-medium">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- {bodyScripts} -->
<svg id="SvgjsSvg1001" width="2" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev" style="overflow: hidden; top: -100%; left: -100%; position: absolute; opacity: 0;"><defs id="SvgjsDefs1002"></defs><polyline id="SvgjsPolyline1003" points="0,0"></polyline><path id="SvgjsPath1004" d="M0 0 "></path></svg>

<script src="{% static "doctor/js/index.js" %}"></script>

<!-- Script for section toggle -->
<script>
    // Get the button and info section elements
    const personalInfoButton = document.getElementById('personalInfoButton');
    const personalInfoSection = document.getElementById('personalInfoSection');
    const professionalInfoButton = document.getElementById('professionalInfoButton');
    const professionalInfoSection = document.getElementById('professionalInfoSection');
    const appointmentsButton = document.getElementById('appointmentsButton');
    const appointmentsSection = document.getElementById('appointmentsSection');

    // Set initial state (hidden by default)
    professionalInfoSection.classList.add('hidden');
    appointmentsSection.classList.add('hidden');
    personalInfoButton.classList.add("text-yellow-400", "border-b-2", "border-yellow-400");

    // Add event listener to toggle visibility
    personalInfoButton.addEventListener('click', function () {
        personalInfoSection.classList.remove('hidden');
        professionalInfoSection.classList.add('hidden');
        appointmentsSection.classList.add('hidden');
        
        personalInfoButton.classList.add("text-yellow-400", "border-b-2", "border-yellow-400");
        professionalInfoButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");
        appointmentsButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");

        appointmentsButton.classList.add("hover:text-yellow-400");
        professionalInfoButton.classList.add("hover:text-yellow-400");
    });

    // Add event listener to toggle visibility
    professionalInfoButton.addEventListener('click', function () {
        professionalInfoSection.classList.remove('hidden');
        personalInfoSection.classList.add('hidden');
        appointmentsSection.classList.add('hidden');
        
        professionalInfoButton.classList.add("text-yellow-400", "border-b-2", "border-yellow-400");
        personalInfoButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");
        appointmentsButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");

        appointmentsButton.classList.add("hover:text-yellow-400");
        personalInfoButton.classList.add("hover:text-yellow-400");
    });

    // Add event listener to toggle visibility
    appointmentsButton.addEventListener('click', function () {
        appointmentsSection.classList.remove('hidden');
        professionalInfoSection.classList.add('hidden');
        personalInfoSection.classList.add('hidden');
        
        appointmentsButton.classList.add("text-yellow-400", "border-b-2", "border-yellow-400");
        personalInfoButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");
        professionalInfoButton.classList.remove("text-yellow-400", "border-b-2", "border-yellow-400");

        professionalInfoButton.classList.add("hover:text-yellow-400");
        personalInfoButton.classList.add("hover:text-yellow-400");
    });
</script>

<!-- Script for Update button enabling -->
<script>
    // Get all the note inputs and status selects
    const noteInputs = document.querySelectorAll('.note-input');
    const statusSelects = document.querySelectorAll('.status-select');
    const updateBtns = document.querySelectorAll('.update-btn');

    noteInputs.forEach(function (input) {
        input.addEventListener('input', function () {
            const appointmentId = input.dataset.id;
            const currentNote = input.value;
            const originalNote = document.querySelector(`input[name="note_${appointmentId}"]`).defaultValue;
            const correspondingButton = document.querySelector(`button[name="update_appointment_${appointmentId}"]`);

            // If note has changed, enable the button
            if (currentNote !== originalNote) {
                correspondingButton.disabled = false;
                correspondingButton.classList.remove("bg-blue-300");
                correspondingButton.classList.add("bg-blue-600");
            } else {
                correspondingButton.disabled = true;
                correspondingButton.classList.remove("bg-blue-600");
                correspondingButton.classList.add("bg-blue-300");
            }
        });
    });

    statusSelects.forEach(function (select) {
        select.addEventListener('change', function () {
            const appointmentId = select.dataset.id;
            const statusSelect = document.querySelector(`select[name="status_${appointmentId}"]`);
            const originalStatus = statusSelect.dataset.defaultStatus;
            const correspondingButton = document.querySelector(`button[name="update_appointment_${appointmentId}"]`);

            // If status has changed, enable the button
            if (originalStatus !== statusSelect.value) {
                correspondingButton.disabled = false;
                correspondingButton.classList.remove("bg-blue-300");
                correspondingButton.classList.add("bg-blue-600");
            } else {
                correspondingButton.disabled = true;
                correspondingButton.classList.remove("bg-blue-600");
                correspondingButton.classList.add("bg-blue-300");
            }
        });
    });
</script>

{% endblock content %}